(this.webpackJsonpto_do_mgmt_ui=this.webpackJsonpto_do_mgmt_ui||[]).push([[0],{13:function(t,e){t.exports={ADD_SUCCESS:"ADD_SUCCESS",LIST_SUCCESS:"LIST_SUCCESS",SET_LOADING:"SET_LOADING",RESET_LOADING:"RESET_LOADING",UPDATE_SUCCESS:"UPDATE_SUCCESS",DELETE_SUCCESS:"DELETE_SUCCESS"}},19:function(t,e){t.exports={ADD_SUCCESS:"ADD_SUCCESS",UPDATE_SUCCESS:"UPDATE_SUCCESS",DELETE_SUCCESS:"DELETE_SUCCESS"}},27:function(t,e){var n="https://weak-tuna-sunbonnet.cyclic.app/api/v1";t.exports={TODOS:n+"/todos",SUBTASKS:n+"/subtasks"}},96:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),s=n(17),o=n.n(s),i=n(6),r=n(2),u=n(13),d=n.n(u);function j(t,e){var n=e.res;switch(e.type){case"".concat(d.a.LIST_SUCCESS):return Object(r.a)(Object(r.a)({},t),{},{data:n});case"".concat(d.a.SET_LOADING):return Object(r.a)(Object(r.a)({},t),{},{loading:!0});case"".concat(d.a.RESET_LOADING):case"".concat(d.a.DELETE_SUCCESS):return Object(r.a)(Object(r.a)({},t),{},{loading:!1});default:return t}}var l=n(15),h=n.n(l),b=n(27),f=n.n(b),O="".concat(f.a.TODOS);var S=n(1),m={data:[],loading:!1},x=Object(c.createContext)(m),p=function(t){var e=t.children,n=Object(c.useReducer)(j,m),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(S.jsx)(x.Provider,{value:{data:s.data,loading:s.loading,list:function(){return new Promise((function(t,e){new Promise((function(t,e){h()(O).then((function(e){t(e.data)})).catch((function(t){e(t.response.data)}))})).then((function(e){o({type:d.a.LIST_SUCCESS,res:e}),t(e)})).catch((function(t){e(t)}))}))},setLoading:function(){o({type:d.a.SET_LOADING})},resetLoading:function(){o({type:d.a.RESET_LOADING})},add:function(t){return new Promise((function(e,n){(function(t){return new Promise((function(e,n){h.a.post(O,t).then((function(t){e(t.data)})).catch((function(t){n(t.response.data)}))}))})(t).then((function(t){o({type:d.a.ADD_SUCCESS,res:t}),e(t)})).catch((function(t){n(t)}))}))},updateTodo:function(t,e){return new Promise((function(n,c){(function(t,e){return new Promise((function(n,c){h.a.put("".concat(O,"/").concat(t),e).then((function(t){n(t.data)})).catch((function(t){c(t.response.data)}))}))})(t,e).then((function(t){n(t)})).catch((function(t){c(t)}))}))},dispatch:o},children:e})},g=n(39),E=n.n(g),C=n(51),v=n(100),w=n(101),T=n(55),_=n(104),k=n(105),D=n(103),A=n(19),U=n.n(A);function y(t,e){var n=e.res;switch(e.type){case"".concat(U.a.LIST_SUCCESS):return Object(r.a)(Object(r.a)({},t),{},{data:n});case"".concat(U.a.DELETE_SUCCESS):return Object(r.a)(Object(r.a)({},t),{},{loading:!1});default:return t}}var L="".concat(f.a.SUBTASKS);var N={data:[]},P=Object(c.createContext)(N),I=function(t){var e=t.children,n=Object(c.useReducer)(y,N),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(S.jsx)(P.Provider,{value:{data:s.data,add:function(t){return new Promise((function(e,n){(function(t){return new Promise((function(e,n){h.a.post(L,t).then((function(t){e(t.data)})).catch((function(t){n(t.response.data)}))}))})(t).then((function(t){o({type:U.a.ADD_SUCCESS,res:t}),e(t)})).catch((function(t){n(t)}))}))},update:function(t,e){return new Promise((function(n,c){(function(t,e){return new Promise((function(n,c){h.a.put("".concat(L,"/").concat(t),e).then((function(t){n(t.data)})).catch((function(t){c(t.response.data)}))}))})(t,e).then((function(t){n(t)})).catch((function(t){c(t)}))}))},remove:function(t){return new Promise((function(e,n){(function(t){return new Promise((function(e,n){h.a.delete("".concat(L,"/").concat(t)).then((function(t){e(t.data)})).catch((function(t){n(t.response.data)}))}))})(t).then((function(t){o({type:U.a.DELETE_SUCCESS,res:t}),e(t)})).catch((function(t){n(t)}))}))},dispatch:o},children:e})},G=n(99),B=n(106);function F(t){var e=t.title,n=t.message,a=Object(c.useState)(!!e),s=Object(i.a)(a,2),o=s[0],r=s[1];return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(G.a,{position:"bottom-end",className:"p-3",children:Object(S.jsxs)(B.a,{onClose:function(){return r(!1)},show:o,delay:3e3,autohide:!0,children:[Object(S.jsx)(B.a.Header,{children:Object(S.jsx)("strong",{className:"me-auto",children:e})}),Object(S.jsx)(B.a.Body,{children:n})]})})})}var R=n(107),K=n(56),H=n(102),J=n(54),Y=n.n(J);function M(t){var e=t.todo,n=t.data,a=Object(c.useState)({show:!1,title:"",message:""}),s=Object(i.a)(a,2),o=s[0],r=s[1],u=Object(c.useState)(""),d=Object(i.a)(u,2),j=d[0],l=d[1],h=Object(c.useContext)(P),b=h.add,f=h.remove,O=h.update,m=Object(c.useContext)(x),p=m.list,g=m.updateTodo;return Object(S.jsxs)("div",{className:"container",children:[n&&n.length>0?n.map((function(t,n){return Object(S.jsx)("div",{children:Object(S.jsx)(v.a,{children:Object(S.jsxs)(w.a,{children:[Object(S.jsx)(T.a,{xs:9,children:Object(S.jsxs)(k.a.Group,{className:"mb-3",children:[Object(S.jsx)("input",{className:"form-check-input",type:"checkbox",checked:!(!t||"completed"!==t.status),onChange:function(n){return function(t){var n=t.id,c=t.status,a=t.task,s={status:c?"completed":"pending"};"pending"===s.status&&g(e,s),O(n,s).then((function(t){t&&(p(),r({show:!0,title:a,message:"Task status updated to ".concat(s.status," status successfully")}))})).catch((function(t){r({show:!0,title:a,message:t.message})})),r({show:!1,title:"",message:""})}({id:t._id,task:t.title,status:n.target.checked})}}),"\xa0",Object(S.jsx)(S.Fragment,{children:t.title})]})}),Object(S.jsx)(T.a,{xs:3,children:Object(S.jsx)("i",{className:"fa fa-trash",onClick:function(e){return n=t._id,Y.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, proceed!"}).then((function(t){t.value&&f(n).then((function(t){t&&(p(),r({show:!0,title:"Subtask",message:"Subtask Deleted Successfully"}),l(""))})).catch((function(t){r({show:!0,title:"Subtask",message:t.message})}))})),void r({show:!1,title:"",message:""});var n}})})]})})},n)})):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(D.a,{variant:"danger",className:"text-center",children:"No Subtasks Found..."})}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)(R.a,{className:"mb-3",children:[Object(S.jsx)(R.a.Text,{children:"Add new subtask"}),Object(S.jsx)(K.a,{value:j,onChange:function(t){return l(t.target.value)}}),Object(S.jsx)(H.a,{variant:"success",onClick:function(){b({title:j,todo_id:e}).then((function(t){t&&(p(),r({show:!0,title:"Subtask",message:"Subtask Added Successfully"}),l(""))})).catch((function(t){r({show:!0,title:"Subtask",message:t.message})})),r({show:!1,title:"",message:""})},children:"Add the task"})]})}),o&&o.show&&Object(S.jsx)(F,{title:o.title,message:o.message})]})}var q=function(t){var e=t.todo,n=t.data;return Object(S.jsx)(I,{children:Object(S.jsx)(M,{todo:e,data:n})})};function z(){var t=Object(c.useState)(""),e=Object(i.a)(t,2),n=e[0],a=e[1],s=Object(c.useState)({show:!1,title:"",message:""}),o=Object(i.a)(s,2),r=o[0],u=o[1],d=Object(c.useContext)(x),j=d.add,l=d.list;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(R.a,{className:"mb-3 w-100",children:[Object(S.jsx)(R.a.Text,{children:"Add new Todo?"}),Object(S.jsx)(K.a,{value:n,onChange:function(t){return a(t.target.value)},placeholder:"Eg. Do Laundry"}),Object(S.jsx)(H.a,{variant:"success",onClick:function(){j({title:n}).then((function(t){t&&(u({show:!0,title:"Todo",message:"Task Added Successfully"}),a(""),l())})).catch((function(t){u({show:!0,title:"Todo",message:t.message})})),u({show:!1,title:"",message:""})},children:"Add the task"})]}),r&&r.show&&Object(S.jsx)(F,{title:r.title,message:r.message})]})}function Q(){var t=Object(c.useState)({show:!1,title:"",message:""}),e=Object(i.a)(t,2),n=e[0],a=e[1],s=Object(c.useContext)(x),o=s.data,r=s.list,u=s.updateTodo,d=function(){var t=Object(C.a)(E.a.mark((function t(e){var n,c,s,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,c=e.status,s=e.task,o={status:c?"completed":"pending"},t.next=4,u(n,o);case 4:return t.sent&&a({show:!0,title:s,message:"Task status updated to ".concat(o.status," status successfully")}),a({show:!1,title:"",message:""}),t.next=9,r();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(S.jsxs)(v.a,{children:[Object(S.jsx)(w.a,{children:Object(S.jsxs)(T.a,{md:{span:6,offset:3},children:[Object(S.jsx)("h2",{className:"text-center",children:"TODO App"}),Object(S.jsx)(z,{}),Object(S.jsx)(_.a,{defaultActiveKey:"0",children:o&&o.length?o.map((function(t,e){return t.completedTask=t.subtasks.filter((function(t){return"completed"===t.status})),Object(S.jsxs)(_.a.Item,{eventKey:e,children:[Object(S.jsxs)(_.a.Header,{children:[Object(S.jsx)(T.a,{xs:7,children:Object(S.jsxs)(k.a.Group,{children:[Object(S.jsx)("input",{className:"form-check-input",type:"checkbox",checked:!(!t||"completed"!==t.status),onChange:function(e){return d({id:t._id,status:e.target.checked,task:t.title})}}),"\xa0",Object(S.jsx)(S.Fragment,{children:t.title})]})}),Object(S.jsx)(T.a,{xs:3,children:Object(S.jsx)("div",{children:t&&t.subtasks.length>0&&Object(S.jsxs)("div",{children:[t.completedTask.length," of ",t.subtasks.length," completed"]})})})]}),Object(S.jsx)(_.a.Body,{children:Object(S.jsx)(q,{todo:t._id,data:t&&t.subtasks.length>0?t.subtasks:[]})})]},e)})):Object(S.jsx)(D.a,{variant:"primary",children:"No Todo Found..."})})]})}),n&&n.show&&Object(S.jsx)(F,{title:n.title,message:n.message})]})}var V=function(){return Object(S.jsx)(p,{children:Object(S.jsx)(Q,{})})};function W(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(V,{})})}n(95);o.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(W,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.43b263c6.chunk.js.map